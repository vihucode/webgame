{"ast":null,"code":"/*\nModes:\nNormal -> ajallinen, oikeista plussaa ja lis채채 aikaa\nUnique -> jos antaa saman nii tulee miinusta ? ei aikaa ?\n*/\nimport userService from \"../services/userService\";\nimport categoryService from \"../services/categoryService\";\nimport filem from \"../miehet.txt\";\nimport filen from \"../naiset.txt\";\nimport filek from \"../kaikki.txt\";\nclass Session {\n  constructor() {\n    this.playerId = null;\n    this.name = \"\";\n    this.timer = 7000;\n    this.run = true;\n    this.points = 0;\n    this.targetTime = 0;\n    this.usetNames = [];\n    this.initialize();\n  }\n  async initialize() {\n    const [name, playerId] = await getActiveUser();\n    this.name = name;\n    this.playerId = playerId;\n    const [catName, catId] = await getActiveCategory();\n    this.catName = catName;\n    this.catId = catId;\n  }\n}\nconst getActiveCategory = async () => {\n  try {\n    const response = await categoryService.getAll();\n    const activeCategory = response.find(cat => cat.active === true);\n    if (activeCategory) {\n      return [activeCategory.category, activeCategory.id];\n    } else {\n      throw new Error('No active category found');\n    }\n  } catch (error) {\n    console.error('Error getting active category:', error);\n    // Handle the error appropriately, such as returning a default value or displaying an error message\n    return [null, null];\n  }\n};\nconst getActiveUser = async () => {\n  try {\n    const response = await userService.getAll();\n    const activeUser = response.find(user => user.active === true);\n    if (activeUser) {\n      return [activeUser.username, activeUser.id];\n    } else {\n      throw new Error('No active user found');\n    }\n  } catch (error) {\n    console.error('Error getting active user:', error);\n    // Handle the error appropriately, such as returning a default value or displaying an error message\n    return [null, null];\n  }\n};\nfunction runTimer(game) {\n  if (game.run) {\n    game.run = false;\n  } else {\n    return;\n  }\n  game.targetTime = new Date().getTime() + game.timer;\n\n  // Update the countdown timer every second\n  var interval = setInterval(function () {\n    // Calculate the remaining time\n    var now = new Date().getTime();\n    game.timer = game.targetTime - now;\n    var minutes = Math.floor(game.timer / (1000 * 60));\n    var seconds = Math.floor(game.timer % (1000 * 60) / 1000);\n\n    // Add leading zero if necessary\n    if (seconds < 10) seconds = '0' + seconds;\n\n    // Update the timer display\n    document.getElementById('timer').innerHTML = minutes + ':' + seconds;\n    document.getElementById('points').innerHTML = game.points;\n\n    // Stop the countdown when time is up\n    if (game.timer <= 0) {\n      document.getElementById('timer').innerHTML = '0:00';\n      document.getElementById('user').disabled = true;\n      userService.updateActive(game.playerId, game.points, game.catName, false);\n      categoryService.updateActive(game.catId, false);\n      game.run = false;\n      clearInterval(interval);\n    }\n  }, 1000);\n}\nasync function nameCheck(game) {\n  const name = document.getElementById('user').value.toLowerCase().replace(/\\b\\w/g, letter => letter.toUpperCase());\n  if (!name) {\n    console.log('No name entered');\n    return;\n  }\n  var response = null;\n  try {\n    switch (game.catName) {\n      case \"men\":\n        document.getElementById('text').innerText = \"MALE NAMES\";\n        response = await fetch(filem);\n        break;\n      case \"women\":\n        document.getElementById('text').innerText = \"FEMALE NAMES\";\n        response = await fetch(filen);\n        break;\n      case \"all\":\n        document.getElementById('text').innerText = \"ALL NAMES\";\n        response = await fetch(filek);\n        break;\n      default:\n        response = await fetch(filem);\n        break;\n    }\n    const nameData = await response.text();\n    const regex = new RegExp(`\\\\b${name}\\\\b`, 'i');\n    if (regex.test(nameData) && !game.usetNames.includes(name)) {\n      game.points += 50;\n      if (game.usetNames.length !== 0) {\n        game.timer += 3000;\n      }\n      game.usetNames.push(name);\n      console.log(`${name} exists in the file`);\n      game.targetTime = new Date().getTime() + game.timer;\n    } else {\n      console.log(`${name} does not exist in the file`);\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  document.getElementById('user').value = '';\n}\nexport { nameCheck, runTimer, Session };","map":{"version":3,"names":["userService","categoryService","filem","filen","filek","Session","constructor","playerId","name","timer","run","points","targetTime","usetNames","initialize","getActiveUser","catName","catId","getActiveCategory","response","getAll","activeCategory","find","cat","active","category","id","Error","error","console","activeUser","user","username","runTimer","game","Date","getTime","interval","setInterval","now","minutes","Math","floor","seconds","document","getElementById","innerHTML","disabled","updateActive","clearInterval","nameCheck","value","toLowerCase","replace","letter","toUpperCase","log","innerText","fetch","nameData","text","regex","RegExp","test","includes","length","push"],"sources":["/Users/vihu/Documents/Program/webgame/webgame/src/components/menNamesGame.js"],"sourcesContent":["/*\nModes:\nNormal -> ajallinen, oikeista plussaa ja lis채채 aikaa\nUnique -> jos antaa saman nii tulee miinusta ? ei aikaa ?\n*/\nimport userService from \"../services/userService\"\nimport categoryService from \"../services/categoryService\"\n\nimport filem from \"../miehet.txt\"\nimport filen from \"../naiset.txt\"\nimport filek from \"../kaikki.txt\"\n\nclass Session {\n  constructor() {\n    this.playerId = null;\n    this.name = \"\";\n    this.timer = 7000;\n    this.run = true;\n    this.points = 0;\n    this.targetTime = 0;\n    this.usetNames = [];\n\n    this.initialize();\n  }\n\n  async initialize() {\n    const [name, playerId] = await getActiveUser();\n    this.name = name;\n    this.playerId = playerId;\n\n    const [catName, catId] = await getActiveCategory();\n    this.catName = catName;\n    this.catId = catId;\n\n  }\n}\n\nconst getActiveCategory = async () => {\n  try {\n    const response = await categoryService.getAll();\n    const activeCategory = response.find(cat => cat.active === true);\n    if (activeCategory) {\n      return [activeCategory.category, activeCategory.id];\n    } else {\n      throw new Error('No active category found');\n    }\n  } catch (error) {\n    console.error('Error getting active category:', error);\n    // Handle the error appropriately, such as returning a default value or displaying an error message\n    return [null, null];\n  }\n};\n\nconst getActiveUser = async () => {\n  try {\n    const response = await userService.getAll();\n    const activeUser = response.find(user => user.active === true);\n    if (activeUser) {\n      return [activeUser.username, activeUser.id];\n    } else {\n      throw new Error('No active user found');\n    }\n  } catch (error) {\n    console.error('Error getting active user:', error);\n    // Handle the error appropriately, such as returning a default value or displaying an error message\n    return [null, null];\n  }\n}\n\nfunction runTimer(game) {\n  if (game.run) {\n    game.run = false;\n  } else {\n    return;\n  }\n\n  game.targetTime = new Date().getTime() + game.timer;\n\n  // Update the countdown timer every second\n  var interval = setInterval(function() {\n    // Calculate the remaining time\n    var now = new Date().getTime();\n    game.timer = game.targetTime - now;\n\n    var minutes = Math.floor(game.timer / (1000 * 60));\n    var seconds = Math.floor((game.timer % (1000 * 60)) / 1000);\n\n    // Add leading zero if necessary\n    if (seconds < 10) seconds = '0' + seconds;\n\n    // Update the timer display\n    document.getElementById('timer').innerHTML = minutes + ':' + seconds;\n    document.getElementById('points').innerHTML = game.points;\n\n    // Stop the countdown when time is up\n    if (game.timer <= 0) {\n      document.getElementById('timer').innerHTML = '0:00'\n      document.getElementById('user').disabled = true\n      userService.updateActive(game.playerId, game.points, game.catName, false )\n      categoryService.updateActive(game.catId, false )\n      game.run = false;\n      clearInterval(interval);\n    }\n  }, 1000);\n}\n\n\nasync function nameCheck(game) {\n  const name = document.getElementById('user').value.toLowerCase().replace(/\\b\\w/g, letter => letter.toUpperCase());\n  if (!name) {\n    console.log('No name entered');\n    return;\n  }\n  var response = null;\n  try {\n    switch (game.catName){\n      case \"men\":\n        document.getElementById('text').innerText = \"MALE NAMES\";\n        response = await fetch(filem)\n        break;\n      case \"women\":\n        document.getElementById('text').innerText = \"FEMALE NAMES\";\n        response = await fetch(filen)\n        break;\n      case \"all\":\n        document.getElementById('text').innerText = \"ALL NAMES\";\n        response = await fetch(filek)\n        break;\n      default:\n        response = await fetch(filem)\n        break;\n    }\n    \n    const nameData = await response.text();\n    const regex = new RegExp(`\\\\b${name}\\\\b`, 'i');\n    if (regex.test(nameData) && !game.usetNames.includes(name)) {\n      game.points += 50;\n      if (game.usetNames.length !== 0){\n        game.timer += 3000;\n      }\n      game.usetNames.push(name);\n      console.log(`${name} exists in the file`);\n      game.targetTime = new Date().getTime() + game.timer;\n    } else {\n      console.log(`${name} does not exist in the file`);\n    }\n  } catch (error) {\n    console.error(error);\n  }\n\n  document.getElementById('user').value = '';\n}\n\n\n\n\nexport {nameCheck, runTimer, Session};\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}